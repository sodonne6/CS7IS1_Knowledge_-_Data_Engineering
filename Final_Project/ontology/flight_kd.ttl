@prefix ex:    <http://example.org/flight#> .
@prefix xsd:   <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:   <http://www.w3.org/2002/07/owl#> .
@prefix schema: <https://schema.org/> .
@prefix skos:  <http://www.w3.org/2004/02/skos/core#> .

####################
# Classes (more than 8 classes cant have more than 3 subclasses)
#################

ex:Airport a owl:Class; rdfs:label "Airport" .
ex:City a owl:Class ; rdfs:label "City" .
ex:Country a owl:Class ; rdfs:label "Country" .
ex:Airline a owl:Class ; rdfs:label "Airline" .
ex:Route a owl:Class ; rdfs:label "Route (single leg - no layover)" .
ex:Landmark a owl:Class ; rdfs:label "city x has landmark y" .
ex:LandmarkType a owl:Class ; rdfs:label "what type of landmark is it" .
ex:Continent a owl:Class ; rdfs:label "Continent" .

######################
#subclassses
######################

#ex:InternationalAirport rdfs:subClassOf ex:Airport .
#ex:DomesticRoute rdfs:subClassOf ex:Route .

######################
# object properties - have a look at the lecture slides on owl for this 
#####################

#this property connexts airports to the city they reside - this is good because some airports
#arent related to the city they're in ex O'Hare is in chicago - couldnt guess from the name
#also for queries you can search how 2 cities connect without the name of airport
#also have inverseOf so it goes both ways 

ex:servesCity a owl:ObjectProperty ;
    rdfs:domain ex:Airport ; rdfs:range ex:City ;
    rdfs:label "serves the city" .

ex:hasAirport a owl:ObjectProperty ;
  rdfs:domain ex:City ; rdfs:range ex:Airport ;
  rdfs:label "has the airport" ;
  owl:inverseOf ex:servesCity .


# make connection between cities and countries 
ex:inCountry a owl:ObjectProperty ;
    rdfs:domain ex:City ; rdfs:range ex:Country .

#routes start and endpoint (where i am and where i want to go)
ex:origin a owl:ObjectProperty ;
    rdfs:domain ex:Route; rdfs:range ex:Airport .

ex:destination a owl:ObjectProperty ;
    rdfs:domain ex:Route ; rdfs:range ex:Airport .

ex:isOriginOf a owl:ObjectProperty ; owl:inverseOf ex:origin .
ex:isDestinationOf a owl:ObjectProperty ; owl:inverseOf ex:destination .

#connection between route and the airline that travels this route
ex:operatedBy a owl:ObjectProperty ;
    rdfs:domain ex:Route ; rdfs:range ex:Airline .

ex:operatesRoute a owl:ObjectProperty ;
  rdfs:domain ex:Airline ; rdfs:range ex:Route ;
  owl:inverseOf ex:operatedBy .

#if there are multiple airports in the same city - paris has 3 airports
ex:sharesCityWith a owl:ObjectProperty, owl:SymmetricProperty ;
  rdfs:domain ex:Airport ; rdfs:range ex:Airport ;
  owl:propertyChainAxiom ( ex:servesCity ex:hasAirport ) .

#airport to airport edges - direct connections no layovers

#ex:directTo a owl:ObjectProperty ;
#    rdfs:domain ex:Airport ; rdfs:range ex:Airport ;
#    rdfs:comment "there is a direct route between origin and destination" .
#    #owl:propertyChainAxiom ( [ owl:inverseOf ex:origin ] ex:destination ) .

ex:directTo a owl:ObjectProperty ;
    rdfs:domain ex:Airport ;
    rdfs:range  ex:Airport ;
    rdfs:subPropertyOf ex:reachable ;
    owl:propertyChainAxiom ( ex:isOriginOf ex:destination ) .

#this will allow for queries on "is there a connection between dublin and sydney"
#transisitive reachability

ex:reachable a owl:ObjectProperty , owl:TransitiveProperty .
ex:directTo rdfs:subPropertyOf ex:reachable .

#Itinerary composition (needed for cardinality later)
#ex:hasLeg a owl:ObjectProperty ;
  #rdfs:domain ex:Itinerary ; rdfs:range ex:Route .

ex:cityName a owl:DatatypeProperty ; rdfs:domain ex:City ; rdfs:range xsd:string .

ex:hasLandmark a owl:ObjectProperty ;
    rdfs:domain ex:City ;
    rdfs:range ex:Landmark ;
    rdfs:label "has landmark" ;
    owl:inverseOf ex:isLandmarkOf .

ex:isLandmarkOf a owl:ObjectProperty ;
    rdfs:domain ex:Landmark ; rdfs:range ex:City ;
    rdfs:label "is landmark of" .

## logic for continent 
ex:inContinent a owl:ObjectProperty ;
  rdfs:domain ex:Country ; rdfs:range ex:Continent ;
  rdfs:label "in continent" ;
  owl:inverseOf ex:hasCountry .

ex:hasCountry a owl:ObjectProperty ;
  rdfs:domain ex:Continent ; rdfs:range ex:Country ;
  rdfs:label "has country" .

##landmark type logic
ex:hasLandmarkType a owl:ObjectProperty ;
  rdfs:domain ex:Landmark ; rdfs:range ex:LandmarkType ;
  rdfs:label "has landmark type" ;
  owl:inverseOf ex:isTypeOf .

ex:isTypeOf a owl:ObjectProperty ;
  rdfs:domain ex:Landmark ; rdfs:range ex:LandmarkType ;
  rdfs:label "is type of" .


###############
# Data Properties - based on data from csv and added properties
##############
ex:iataCode a owl:DatatypeProperty ; rdfs:domain ex:Airport ; rdfs:range xsd:string .
ex:icaoCode a owl:DatatypeProperty ; rdfs:domain ex:Airport ; rdfs:range xsd:string .
ex:airportName a owl:DatatypeProperty ; rdfs:domain ex:Airport ; rdfs:range xsd:string .
ex:latitude a owl:DatatypeProperty ; rdfs:domain ex:Airport ; rdfs:range xsd:decimal .
ex:longitude a owl:DatatypeProperty ; rdfs:domain ex:Airport ; rdfs:range xsd:decimal .
ex:stops a owl:DatatypeProperty ; rdfs:domain ex:Route   ; rdfs:range xsd:integer .

#ex:estimatedDistanceKm a owl:DatatypeProperty ; rdfs:domain ex:Route ; rdfs:range xsd:decimal .
#ex:avgTravelTimeMin a owl:DatatypeProperty ; rdfs:domain ex:Itinerary ; rdfs:range xsd:integer .


#cardinality restrictions 

#airport can only have connection to one city (where it resides)
ex:Airport rdfs:subClassOf
    [ a owl:Restriction ; owl:onProperty ex:servesCity ; owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ; owl:onClass ex:City ],
    [ a owl:Restriction; owl:onProperty ex:iataCode ; owl:cardinality "1"^^xsd:nonNegativeInteger ],
    [ a owl:Restriction ; owl:onProperty ex:airportName ; owl:cardinality "1"^^xsd:nonNegativeInteger] .

#routes only have 1 origin and 1 destination
ex:Route rdfs:subClassOf
    [a owl:Restriction ; owl:onProperty ex:origin ; owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ; owl:onClass ex:Airport ],
    [a owl:Restriction ; owl:onProperty ex:destination ; owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger; owl:onClass ex:Airport].

#itineraries need have at least 1 leg to make sense
ex:Itinerary rdfs:subClassOf
    [a owl:Restriction ; owl:onProperty ex:hasLeg ; owl:minQualifiedCardinality "1"^^xsd:nonNegativeInteger ; owl:onClass ex:Route ].

# Ensure latitude/longitude appear exactly once per Airport
ex:Airport rdfs:subClassOf
  [ a owl:Restriction ; owl:onProperty ex:latitude  ; owl:cardinality "1"^^xsd:nonNegativeInteger ],
  [ a owl:Restriction ; owl:onProperty ex:longitude ; owl:cardinality "1"^^xsd:nonNegativeInteger ] .

ex:City rdfs:subClassOf
  [ a owl:Restriction ;
    owl:onProperty ex:inCountry ;
    owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ;
    owl:onClass ex:Country ] .

ex:Country rdfs:subClassOf
  [ a owl:Restriction ; owl:onProperty ex:inContinent ; owl:qualifiedCardinality "1"^^xsd:nonNegativeInteger ; owl:onClass ex:Continent ] .

ex:City rdfs:subClassOf [ a owl:Restriction ; owl:onProperty ex:cityName ; owl:cardinality "1"^^xsd:nonNegativeInteger ] .

